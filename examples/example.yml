name: Build and Push Docker Image

on:
  workflow_dispatch:
    inputs:
    checkout_ref:
      description: 'Git reference to checkout (branch, tag, or commit hash)'
        required: true
      build_version:
        description: 'Version to tag the Docker image'
        required: true


jobs:
  build-and-push:
    runs-on: ubuntu-latest

    steps:
      - name: Run Reusable Build & Push Action
        uses: carrotincentives/build-maven-action@v1
        with:
          checkout_ref: ${{ github.event.inputs.checkout_ref }}
          java_version: '11'
          maven_version: '3.6.3'
          image_name: 'my-docker-image'
          build_version: ${{ github.event.inputs.build_version }}
          registry_url: 'my-docker-registry'
          registry_username: ${{ secrets.REGISTRY_USERNAME }}
          registry_password: ${{ secrets.REGISTRY_PASSWORD }}
```
